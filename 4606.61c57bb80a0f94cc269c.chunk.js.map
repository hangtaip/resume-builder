{"version":3,"file":"4606.61c57bb80a0f94cc269c.chunk.js","mappings":"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","sources":["webpack://resume-builder/./src/js/objectRegistry.js","webpack://resume-builder/./src/pages/home/resume_default/experiences/experiences.js"],"sourcesContent":["class ObjectRegistry {\n  constructor() {\n    this.registry = new Map();\n  }\n\n  set(key, value) {\n    this.registry.set(key, value);\n  }\n\n  get(key) {\n    return this.registry.get(key);\n  }\n\n  clear() {\n    this.registry.forEach((_, key) => this.registry.delete(key));\n  }\n}\n\nexport default new ObjectRegistry();\n","import DOMPurify from \"dompurify\";\nimport Listener from \"../../../../js/listener.js\";\nimport { isNullUndefinedOrEmpty } from \"../../../../js/helper.js\";\n// import yaml from \"../../data/data.yaml\";\nimport { registerCustomElement } from \"../../../../js/registerComponent.js\";\nimport styles from \"./experiences.shadow.scss\";\nimport { icon, library } from \"@fortawesome/fontawesome-svg-core\";\nimport { faLaptopCode } from \"@fortawesome/free-solid-svg-icons\";\nimport TraceDom from \"../../../../js/traceDom.js\";\nimport eventManager from \"../../../../js/eventManager.js\";\nimport objectRegistry from \"../../../../js/objectRegistry.js\";\n\nexport default class UserExperiences extends HTMLElement {\n  constructor() {\n    super();\n    this.attachShadow({ mode: \"open\" });\n    this.isReadyPromise = new Promise(resolve => {\n      this.resolveReady = resolve;\n    });\n    this.formRequestPromise = new Promise(resolve => {\n      this.resolveFormRequestReady = resolve;\n    });\n    this.listener;\n    this.customEventData = {\n      await: false,\n      awaitDetail() {\n        return 0;\n      },\n      eventName: \"handleCustomEvent\",\n      details: \"\",\n    };\n    this.styleType = this.dataset.style || \"default\";\n    this.handleFillResumeComponent = this.handleFillResumeComponent.bind(this);\n    this.unsubscribe;\n    library.add(faLaptopCode);\n  }\n\n  connectedCallback() {\n    this.setupEventListener();\n    this.render().then(() => {\n      this.resolveReady();\n    });\n    this.styling();\n    // this.timeline();\n  }\n\n  disconnectedCallback() {\n    this.unsubscribe();\n  }\n\n  genExpList(exp) {\n    return exp.desc\n      .map(\n        (item) => {\n          if (!isNullUndefinedOrEmpty(item)) {\n            return ` \n              <li>${item}</li>\n            `}\n          }\n      )\n      .join(\"\");\n  }\n\n  async render() {\n    const i = icon(faLaptopCode, {\n      classes: [\"fa-laptop-code\"],\n    });\n\n    const dom = `\n        <div class=\"container\">\n          <h3 class=\"header\">\n            ${i.node[0].outerHTML}\n            <span class=\"title\">Experiences</span>\n          </h3>\n        </div>\n      `;\n\n    this.shadowRoot.innerHTML = DOMPurify.sanitize(dom);\n\n    const images = this.shadowRoot.querySelectorAll(\"img\");\n    const imagePromises = Array.from(images).map(img => {\n      if (img.complete) return Promise.resolve();\n      return new Promise(resolve => { \n        img.onload = resolve; \n        img.onerror = resolve; \n      });\n    });\n\n    await Promise.all(imagePromises);\n    await new Promise(resolve => requestAnimationFrame(() => resolve()));\n  }\n\n  appendData(data) {\n    let tl = \"\";\n\n    const expsDom = Object.values(data).toReversed()\n      .map((exp) => {\n        if (!isNullUndefinedOrEmpty(exp.tl_from) && !isNullUndefinedOrEmpty(exp.tl_to)) {\n          tl = `<span class=\"tl\">${exp.tl_from} - ${exp.tl_to}</span>`;\n        } else if (!isNullUndefinedOrEmpty(exp.tl_from) && isNullUndefinedOrEmpty(exp.tl_to)) {\n          tl = `<span class=\"tl\">${exp.tl_from} - current</span>`;\n        }\n\n        return `\n          <div class=\"card\">\n            <div class=\"header\">\n              <span class=\"pos\">${exp.pos}</span>\n              <span class=\"org\">${exp.org}</span>\n              ${tl}  \n            </div>\n            <div class=\"body\">\n              <ul>\n                ${this.genExpList(exp)}\n              </ul>\n            </div>\n          </div>\n        `;\n      });\n\n    const container = new DOMParser().parseFromString(DOMPurify.sanitize(expsDom.join(\" \")), \"text/html\");\n    const fragments = new DocumentFragment();\n    while(container.body.firstChild) {\n      fragments.append(container.body.firstChild);\n    }\n    this.shadowRoot.querySelector(\".container\").append(fragments);\n  }\n\n  async styling() {\n    const sheet = new CSSStyleSheet();\n    // sheet.replaceSync(styles);\n        // sheet.replaceSync(styles.toString());\n    // styles.use({target: this.shadowRoot});\n    // const style = await import(`./experiences-${this.styleType}.shadow.scss`);\n    sheet.replaceSync(styles.toString());\n\n    this.shadowRoot.adoptedStyleSheets = [sheet];\n  }\n\n  setupEventListener() {\n    this.listener = new Listener(this);\n    this.listener.setDelegates(this);\n    this.unsubscribe = eventManager.subscribe(\"fillResumeComponent\", this.listener);\n  }\n\n  async handleFillResumeComponent(event, delegated) {\n    const isDOM = delegated instanceof Listener;\n\n    if (isDOM) {\n      this.appendData(event.detail.data.owner.exp);\n\n      await new Promise(resolve => requestAnimationFrame(() => resolve())).then(() => {\n      this.resolveFormRequestReady();\n    });\n    } else {\n      console.log(\"external\");\n    } \n  }\n\n  async publishCustomEvent(data) {\n    try {\n      if (data.await) {\n        await data.awaitDetail();\n      }\n\n      const eventDetail = {\n        bubbles: true,\n        composed: true,\n        detail: data.details,\n      };\n\n      eventManager.publish(data.eventName, eventDetail);\n    } catch (err) {\n      console.error(`Failed to publish ${data.eventName} : ${err}`);\n    }\n  }\n\n  // timeline() {\n  //   const container = this.shadowRoot.querySelector(\".container\");\n  //   const trace = new TraceDom(container);\n  //   trace.measure();\n  // } \n}\n\n//customElements.define('user-experiences', UserExperiences);\nregisterCustomElement(\"user-experiences\", UserExperiences);\n"],"names":["constructor","this","registry","Map","set","key","value","get","clear","forEach","_","delete","UserExperiences","HTMLElement","super","attachShadow","mode","isReadyPromise","Promise","resolve","resolveReady","formRequestPromise","resolveFormRequestReady","listener","customEventData","await","awaitDetail","eventName","details","styleType","dataset","style","handleFillResumeComponent","bind","unsubscribe","add","connectedCallback","setupEventListener","render","then","styling","disconnectedCallback","genExpList","exp","desc","map","item","join","dom","classes","node","outerHTML","shadowRoot","innerHTML","sanitize","images","querySelectorAll","imagePromises","Array","from","img","complete","onload","onerror","all","requestAnimationFrame","appendData","data","tl","expsDom","Object","values","toReversed","tl_from","tl_to","pos","org","container","DOMParser","parseFromString","fragments","DocumentFragment","body","firstChild","append","querySelector","sheet","CSSStyleSheet","replaceSync","toString","adoptedStyleSheets","setDelegates","subscribe","event","delegated","detail","owner","console","log","publishCustomEvent","eventDetail","bubbles","composed","publish","err","error"],"sourceRoot":""}