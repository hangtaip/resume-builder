{"version":3,"file":"338.aa2e716e7135bde639a2.chunk.js","mappings":"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","sources":["webpack://resume-builder/./src/pages/home/resume_default/details/details.js","webpack://resume-builder/./src/js/objectRegistry.js"],"sourcesContent":["import DOMPurify from \"dompurify\";\nimport Listener from \"../../../../js/listener.js\";\n// import yaml from \"../../data/data.yaml\";\nimport country_codes from \"../../../../data/country_codes.yaml\";\nimport { registerCustomElement } from \"../../../../js/registerComponent.js\";\nimport styles from \"./details.shadow.scss\";\nimport { icon, library } from \"@fortawesome/fontawesome-svg-core\";\nimport {\n  faCalendarDays,\n  faDoorOpen,\n  faEnvelope,\n  faHouseUser,\n  faUser,\n} from \"@fortawesome/free-solid-svg-icons\";\nimport { faGithub, faWhatsapp } from \"@fortawesome/free-brands-svg-icons\";\nimport eventManager from \"../../../../js/eventManager.js\";\nimport objectRegistry from \"../../../../js/objectRegistry.js\";\n\nexport default class UserDetails extends HTMLElement {\n  constructor() {\n    super();\n    this.attachShadow({ mode: \"open\" });\n    this.isReadyPromise = new Promise(resolve => {\n      this.resolveReady = resolve;\n    });\n    this.formRequestPromise = new Promise(resolve => {\n      this.resolveFormRequestReady = resolve;\n    });\n    this.listener;\n    this.handleFillResumeComponent = this.handleFillResumeComponent.bind(this);\n    this.unsubscribe;\n    library.add(\n      faCalendarDays,\n      faEnvelope,\n      faGithub,\n      faHouseUser,\n      faUser,\n      faWhatsapp,\n    ); \n  }\n\n  connectedCallback() {\n    this.setupEventListener();\n    // this.testRender();\n    this.render().then(() => {\n      this.resolveReady();\n    });\n    this.styling();\n  }\n\n  disconnectedCallback() {\n    this.unsubscribe();\n  }\n\n  async render() {\n    const calendar = icon(faCalendarDays, { classes: [\"fa-calender\", \"icon\"] });\n    const github = icon(faGithub, { classes: [\"fa-github\", \"icon\"] });\n    const house = icon(faHouseUser, { classes: [\"fa-house\", \"icon\"] });\n    const mail = icon(faEnvelope, { classes: [\"fa-envelope\", \"icon\"] });\n    const rezeki = icon(faDoorOpen, { classes: [\"fa-doorOpen\", \"icon\"] });\n    const user = icon(faUser, { classes: [\"fa-user\", \"icon\"] });\n    const whatsapp = icon(faWhatsapp, { classes: [\"fa-whatsapp\", \"icon\"] });\n    // const getCC = (obj) => {\n    //   return `+${country_codes[obj]}`;\n    // };\n\n    const dom = `\n      <div class=\"container\">\n        <div class=\"pic\">\n          <user-pic></user-pic>\n        </div>\n        <div class=\"info\">\n          <div class=\"attr\">\n            <div class=\"field\">\n              ${user.node[0].outerHTML}\n              <span class=\"data\" data-attr=\"name\"></span>\n            </div>\n          </div>\n          <div class=\"attr\">\n            <div class=\"field\">\n              ${calendar.node[0].outerHTML}\n              <span class=\"data\" data-attr=\"yob\"></span>\n            </div>\n          </div>\n          <div class=\"attr\">\n            <div class=\"field\">\n              ${whatsapp.node[0].outerHTML}\n              <span class=\"data\" data-attr=\"contact\"></span>\n            </div>\n          </div>\n          <div class=\"attr\">\n            <div class=\"field\">\n              ${mail.node[0].outerHTML}\n              <span class=\"data\" data-attr=\"email\"></span>\n            </div>\n          </div>\n          <div class=\"attr\">\n            <div class=\"field\">\n              ${github.node[0].outerHTML}\n              <span class=\"data\" data-attr=\"github\"></span>\n            </div>\n          </div>\n          <div class=\"attr\">\n            <div class=\"field\">\n              ${house.node[0].outerHTML}\n              <span class=\"data\" data-attr=\"location\"></span>\n            </div>\n          </div>\n          <div class=\"attr\">\n            <div class=\"field\">\n              ${rezeki.node[0].outerHTML}\n              <span class=\"data\" data-attr=\"seek\"></span>\n            </div>\n          </div>\n        </div>\n        <div class=\"motto\">\n          <div class=\"field\">\n            <p class=\"data\" data-attr=\"motto\"></p>\n          </div>\n        </div>\n      </div>\n    `;\n\n    this.shadowRoot.innerHTML = DOMPurify.sanitize(dom);\n\n    const images = this.shadowRoot.querySelectorAll(\"img\");\n    const imagePromises = Array.from(images).map(img => {\n      if (img.complete) return Promise.resolve();\n      return new Promise(resolve => { \n        img.onload = resolve; \n        img.onerror = resolve; \n      });\n    });\n\n    await Promise.all(imagePromises);\n    await new Promise(resolve => requestAnimationFrame(() => resolve()));\n  }\n\n  async styling() {\n    const sheet = new CSSStyleSheet();\n    // sheet.replaceSync(styles);\n    //const cssModule = import('./details.shadow.scss');\n    // sheet.replaceSync(styles.toString());\n    // styles.use({ target: this.shadowRoot });\n    // const style = await import(`./details-${this.dataset.templateStyle}.shadow.scss`);\n    sheet.replaceSync(styles);\n    this.shadowRoot.adoptedStyleSheets = [sheet];\n  }\n\n  setupEventListener() {\n    this.listener = new Listener(this);\n    this.listener.setDelegates(this);\n    this.unsubscribe = eventManager.subscribe(\"fillResumeComponent\", this.listener);\n  }\n\n  async handleFillResumeComponent(event, delegated) {\n    const isDOM = delegated instanceof Listener;\n\n    if (isDOM) {\n      // console.log(event.detail.data.owner);\n      const blob = event.detail.data.owner.image;\n      blob.text().then(src => {\n        const data = JSON.parse(src).data\n        if (data && data.includes(\"https://placehold.co/600x400\")) {\n          this.shadowRoot.querySelector(\".container\").classList.add(\"no-pic\"); \n        } else {\n          this.shadowRoot.querySelector(\".container\").classList.remove(\"no-pic\"); \n        }\n      });\n      this.shadowRoot.querySelectorAll(\".field\").forEach(node => { \n        node.querySelector(\".data\").textContent = event.detail.data.owner[node.querySelector(\".data\").dataset.attr];\n      });\n\n      this.shadowRoot.querySelector(`.field [data-attr=\"contact\"]`).textContent = `${this.getCC(event.detail.data.owner.country_code)} ${event.detail.data.owner.tel}`;\n\n      if (Object.values(event.detail.data.owner.skills).length > 9) {\n        this.shadowRoot.querySelector(\".container\").classList.add(\"all-fullWidth\");\n      }\n\n      await new Promise(resolve => requestAnimationFrame(() => resolve())).then(() => {\n        this.resolveFormRequestReady();\n      });\n    } else {\n      console.log(\"external\");\n    } \n  }\n\n  // testRender() {\n  //   const calendar = icon(faCalendarDays, { classes: [\"fa-calender\", \"icon\"] });\n  //   const github = icon(faGithub, { classes: [\"fa-github\", \"icon\"] });\n  //   const house = icon(faHouseUser, { classes: [\"fa-house\", \"icon\"] });\n  //   const mail = icon(faEnvelope, { classes: [\"fa-envelope\", \"icon\"] });\n  //   const rezeki = icon(faDoorOpen, { classes: [\"fa-doorOpen\", \"icon\"] });\n  //   const user = icon(faUser, { classes: [\"fa-user\", \"icon\"] });\n  //   const whatsapp = icon(faWhatsapp, { classes: [\"fa-whatsapp\", \"icon\"] });\n  //   const getCC = (obj) => {\n  //     return `+${country_codes[obj]}`;\n  //   };\n  //\n  //   const dom = `\n  //     <div class=\"container\">\n  //       <div class=\"pic\">\n  //         <user-pic></user-pic>\n  //       </div>\n  //       <div class=\"info\">\n  //         <div class=\"attr\">\n  //           <div class=\"field\">\n  //             ${user.node[0].outerHTML}\n  //             <span class=\"data\" data-attr=\"name\">${yaml.owner.name}</span>\n  //           </div>\n  //         </div>\n  //         <div class=\"attr\">\n  //           <div class=\"field\">\n  //             ${calendar.node[0].outerHTML}\n  //             <span class=\"data\" data-attr=\"yob\">${yaml.owner.yob}</span>\n  //           </div>\n  //         </div>\n  //         <div class=\"attr\">\n  //           <div class=\"field\">\n  //             ${whatsapp.node[0].outerHTML}\n  //             <span class=\"data\" data-attr=\"contact\">${this.getCC(yaml.owner.country_code)} ${yaml.owner.tel}</span>\n  //           </div>\n  //         </div>\n  //         <div class=\"attr\">\n  //           <div class=\"field\">\n  //             ${mail.node[0].outerHTML}\n  //             <span class=\"data\" data-attr=\"email\">${yaml.owner.email}</span>\n  //           </div>\n  //         </div>\n  //         <div class=\"attr\">\n  //           <div class=\"field\">\n  //             ${github.node[0].outerHTML}\n  //             <span class=\"data\" data-attr=\"github\">${yaml.owner.github}</span>\n  //           </div>\n  //         </div>\n  //         <div class=\"attr\">\n  //           <div class=\"field\">\n  //             ${house.node[0].outerHTML}\n  //             <span class=\"data\" data-attr=\"location\">${yaml.owner.location}</span>\n  //           </div>\n  //         </div>\n  //         <div class=\"attr\">\n  //           <div class=\"field\">\n  //             ${rezeki.node[0].outerHTML}\n  //             <span class=\"data\" data-attr=\"seek\">${yaml.owner.seek}</span>\n  //           </div>\n  //         </div>\n  //       </div>\n  //       <div class=\"motto\">\n  //         <div>\n  //           <p data-attr=\"motto\">\n  //             ${yaml.owner.motto}\n  //           </p>\n  //         </div>\n  //       </div>\n  //     </div>\n  //   `;\n  //\n  //   this.shadowRoot.innerHTML = DOMPurify.sanitize(dom)\n  // }\n\n  getCC(obj) {\n      return country_codes[obj] ? `+${country_codes[obj]}` : \"\";\n  }; \n\n  async publishCustomEvent(data) {\n    try {\n      if (data.await) {\n        await data.awaitDetail();\n      }\n\n      const eventDetail = {\n        bubbles: true,\n        composed: true,\n        detail: data.details,\n      };\n\n      eventManager.publish(data.eventName, eventDetail);\n    } catch (err) {\n      console.error(`Failed to publish ${data.eventName} : ${err}`);\n    }\n  }\n}\n\n//customElements.define('user-details', UserDetails);\nregisterCustomElement(\"user-details\", UserDetails);\n","class ObjectRegistry {\n  constructor() {\n    this.registry = new Map();\n  }\n\n  set(key, value) {\n    this.registry.set(key, value);\n  }\n\n  get(key) {\n    return this.registry.get(key);\n  }\n\n  clear() {\n    this.registry.forEach((_, key) => this.registry.delete(key));\n  }\n}\n\nexport default new ObjectRegistry();\n"],"names":["UserDetails","HTMLElement","constructor","super","this","attachShadow","mode","isReadyPromise","Promise","resolve","resolveReady","formRequestPromise","resolveFormRequestReady","listener","handleFillResumeComponent","bind","unsubscribe","add","connectedCallback","setupEventListener","render","then","styling","disconnectedCallback","calendar","classes","github","house","mail","rezeki","user","whatsapp","dom","node","outerHTML","shadowRoot","innerHTML","sanitize","images","querySelectorAll","imagePromises","Array","from","map","img","complete","onload","onerror","all","requestAnimationFrame","sheet","CSSStyleSheet","replaceSync","adoptedStyleSheets","setDelegates","subscribe","event","delegated","detail","data","owner","image","text","src","JSON","parse","includes","querySelector","classList","remove","forEach","textContent","dataset","attr","getCC","country_code","tel","Object","values","skills","length","console","log","obj","publishCustomEvent","await","awaitDetail","eventDetail","bubbles","composed","details","publish","eventName","err","error","registry","Map","set","key","value","get","clear","_","delete"],"sourceRoot":""}