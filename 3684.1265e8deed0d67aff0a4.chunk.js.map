{"version":3,"file":"3684.1265e8deed0d67aff0a4.chunk.js","mappings":"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","sources":["webpack://resume-builder/./src/pages/home/resume_classic/experiences/experiences.js"],"sourcesContent":["import DOMPurify from \"dompurify\";\nimport Listener from \"../../../../js/listener.js\";\nimport { isNullUndefinedOrEmpty } from \"../../../../js/helper.js\";\n// import yaml from \"../../data/data.yaml\";\nimport { registerCustomElement } from \"../../../../js/registerComponent.js\";\nimport styles from \"./experiences.shadow.scss\";\nimport { icon, library } from \"@fortawesome/fontawesome-svg-core\";\nimport { faLaptopCode } from \"@fortawesome/free-solid-svg-icons\";\nimport TraceDom from \"../../../../js/traceDom.js\";\nimport eventManager from \"../../../../js/eventManager.js\";\nimport objectRegistry from \"../../../../js/objectRegistry.js\";\n\nexport default class UserExperiencesClassic extends HTMLElement {\n  constructor() {\n    super();\n    this.attachShadow({ mode: \"open\" });\n    this.isReadyPromise = new Promise(resolve => {\n      this.resolveReady = resolve;\n    });\n    this.formRequestPromise = new Promise(resolve => {\n      this.resolveFormRequestReady = resolve;\n    });\n    this.listener;\n    this.customEventData = {\n      await: false,\n      awaitDetail() {\n        return 0;\n      },\n      eventName: \"handleCustomEvent\",\n      details: \"\",\n    };\n    this.styleType = this.dataset.style || \"default\";\n    this.handleFillResumeComponent = this.handleFillResumeComponent.bind(this);\n    this.unsubscribe;\n    library.add(faLaptopCode);\n  }\n\n  connectedCallback() {\n    this.setupEventListener();\n    this.render().then(() => {\n      this.resolveReady();\n    });\n    this.styling();\n    // this.timeline();\n  }\n\n  disconnectedCallback() {\n    this.unsubscribe();\n  }\n\n  genExpList(exp) {\n    return exp.desc\n      .map(\n        (item) => {\n          if (!isNullUndefinedOrEmpty(item)) {\n            return ` \n              <li>${item}</li>\n            `}\n          }\n      )\n      .join(\"\");\n  }\n\n  async render() {\n    const i = icon(faLaptopCode, {\n      classes: [\"fa-laptop-code\"],\n    });\n\n    const dom = `\n        <div class=\"container\">\n          <h3 class=\"header\">\n            <span class=\"title\">Experiences</span>\n          </h3>\n        </div>\n      `;\n\n    this.shadowRoot.innerHTML = DOMPurify.sanitize(dom);\n\n    const images = this.shadowRoot.querySelectorAll(\"img\");\n    const imagePromises = Array.from(images).map(img => {\n      if (img.complete) return Promise.resolve();\n      return new Promise(resolve => { \n        img.onload = resolve; \n        img.onerror = resolve; \n      });\n    });\n\n    await Promise.all(imagePromises);\n    await new Promise(resolve => requestAnimationFrame(() => resolve()));\n  }\n\n  appendData(data) {\n    let tl = \"\";\n\n    const expsDom = Object.values(data).toReversed()\n      .map((exp) => {\n        if (!isNullUndefinedOrEmpty(exp.tl_from) && !isNullUndefinedOrEmpty(exp.tl_to)) {\n          tl = `<span class=\"tl\">${exp.tl_from} - ${exp.tl_to}</span>`;\n        } else if (!isNullUndefinedOrEmpty(exp.tl_from) && isNullUndefinedOrEmpty(exp.tl_to)) {\n          tl = `<span class=\"tl\">${exp.tl_from} - current</span>`;\n        }\n\n        return `\n          <div class=\"card\">\n            <div class=\"header\">\n              <div class=\"box\">\n                <span class=\"pos\">${exp.pos}</span>\n              </div>\n              <div class=\"box text-right\">\n                <span class=\"org\">${exp.org}</span>\n                ${tl}\n              </div>\n            </div>\n            <div class=\"body\">\n              <ul>\n                ${this.genExpList(exp)}\n              </ul>\n            </div>\n          </div>\n        `;\n      });\n\n    const container = new DOMParser().parseFromString(DOMPurify.sanitize(expsDom.join(\" \")), \"text/html\");\n    const fragments = new DocumentFragment();\n    while(container.body.firstChild) {\n      fragments.append(container.body.firstChild);\n    }\n    this.shadowRoot.querySelector(\".container\").append(fragments);\n  }\n\n  async styling() {\n    const sheet = new CSSStyleSheet();\n    // sheet.replaceSync(styles);\n        // sheet.replaceSync(styles.toString());\n    // styles.use({target: this.shadowRoot});\n    // const style = await import(`./experiences-${this.styleType}.shadow.scss`);\n    sheet.replaceSync(styles.toString());\n\n    this.shadowRoot.adoptedStyleSheets = [sheet];\n  }\n\n  setupEventListener() {\n    this.listener = new Listener(this);\n    this.listener.setDelegates(this);\n    this.unsubscribe = eventManager.subscribe(\"fillResumeComponent\", this.listener);\n  }\n\n  async handleFillResumeComponent(event, delegated) {\n    const isDOM = delegated instanceof Listener;\n\n    if (isDOM) {\n      this.appendData(event.detail.data.owner.exp);\n\n      await new Promise(resolve => requestAnimationFrame(() => resolve())).then(() => {\n      this.resolveFormRequestReady();\n    });\n    } else {\n      console.log(\"external\");\n    } \n  }\n\n  async publishCustomEvent(data) {\n    try {\n      if (data.await) {\n        await data.awaitDetail();\n      }\n\n      const eventDetail = {\n        bubbles: true,\n        composed: true,\n        detail: data.details,\n      };\n\n      eventManager.publish(data.eventName, eventDetail);\n    } catch (err) {\n      console.error(`Failed to publish ${data.eventName} : ${err}`);\n    }\n  }\n\n  // timeline() {\n  //   const container = this.shadowRoot.querySelector(\".container\");\n  //   const trace = new TraceDom(container);\n  //   trace.measure();\n  // } \n}\n\n//customElements.define('user-experiences', UserExperiences);\nregisterCustomElement(\"user-experiences-classic\", UserExperiencesClassic);\n"],"names":["UserExperiencesClassic","HTMLElement","constructor","super","this","attachShadow","mode","isReadyPromise","Promise","resolve","resolveReady","formRequestPromise","resolveFormRequestReady","listener","customEventData","await","awaitDetail","eventName","details","styleType","dataset","style","handleFillResumeComponent","bind","unsubscribe","add","connectedCallback","setupEventListener","render","then","styling","disconnectedCallback","genExpList","exp","desc","map","item","join","classes","shadowRoot","innerHTML","sanitize","images","querySelectorAll","imagePromises","Array","from","img","complete","onload","onerror","all","requestAnimationFrame","appendData","data","tl","expsDom","Object","values","toReversed","tl_from","tl_to","pos","org","container","DOMParser","parseFromString","fragments","DocumentFragment","body","firstChild","append","querySelector","sheet","CSSStyleSheet","replaceSync","toString","adoptedStyleSheets","setDelegates","subscribe","event","delegated","detail","owner","console","log","publishCustomEvent","eventDetail","bubbles","composed","publish","err","error"],"sourceRoot":""}