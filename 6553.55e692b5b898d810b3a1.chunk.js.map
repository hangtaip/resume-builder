{"version":3,"file":"6553.55e692b5b898d810b3a1.chunk.js","mappings":"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","sources":["webpack://resume-builder/./src/pages/home/resume_default/educations/educations.js"],"sourcesContent":["import DOMPurify from \"dompurify\";\nimport Listener from \"../../../../js/listener.js\";\n// import yaml from \"../../data/data.yaml\";\nimport { registerCustomElement } from \"../../../../js/registerComponent.js\";\nimport styles from \"./educations.shadow.scss\";\nimport { icon, library } from \"@fortawesome/fontawesome-svg-core\";\nimport { faUserGraduate } from \"@fortawesome/free-solid-svg-icons\";\nimport eventManager from \"../../../../js/eventManager.js\";\nimport objectRegistry from \"../../../../js/objectRegistry.js\";\n\nexport default class UserEducations extends HTMLElement {\n  constructor() {\n    super();\n    this.attachShadow({ mode: \"open\" });\n    this.isReadyPromise = new Promise(resolve => {\n      this.resolveReady = resolve;\n    });\n    this.formRequestPromise = new Promise(resolve => {\n      this.resolveFormRequestReady = resolve;\n    });\n    this.listener;\n    this.unsubscribe;\n    this.styleType = this.dataset.style || \"default\";\n    this.customEventData = {\n      await: false,\n      awaitDetail() {\n        return 0;\n      },\n      eventName: \"handleCustomEvent\",\n      details: \"\",\n    };\n    this._lastObservedSize = null;\n    this._sameSizeFrameCount = 0;\n    this._animationFrameId = null;\n    this._pendingSize = null;\n\n    this.handleFillResumeComponent = this.handleFillResumeComponent.bind(this);\n    this.handleTransitionend = this.handleTransitionend.bind(this);\n    library.add(faUserGraduate);\n  }\n\n  connectedCallback() {\n    this.setupEventListener();\n    // this.testRender();\n    this.render().then(() => {\n      this.resolveReady();\n    });\n    this.styling();\n    // this.setupGenericEventListener();\n  }\n\n  disconnectedCallback() {\n    this.unsubscribe();\n    this.abortGenericEventListener(); \n  }\n\n  async render() {\n    const i = icon(faUserGraduate, {\n      classes: [\"fa-user-graduate\"],\n    });\n\n    const dom = `\n      <div class=\"container\">\n        <h3 class=\"header\">\n          ${i.node[0].outerHTML}\n          <span class=\"title\">Education</span>\n        </h3> \n      </div>\n    `;\n\n    this.shadowRoot.innerHTML = DOMPurify.sanitize(dom);\n\n    const images = this.shadowRoot.querySelectorAll(\"img\");\n    const imagePromises = Array.from(images).map(img => {\n      if (img.complete) return Promise.resolve();\n      return new Promise(resolve => { \n        img.onload = resolve; \n        img.onerror = resolve; \n      });\n    });\n\n    await Promise.all(imagePromises);\n    await new Promise(resolve => requestAnimationFrame(() => resolve()));\n  }\n\n  appendData(data) {\n    const eduDom = Object.values(data).map(edu => {\n      return `\n        <div class=\"field-group\">\n          <div class=\"card field\">\n            <span class=\"body\" data-attr=\"field\">${edu.field}</span>\n          </div>\n          <div class=\"card field\">\n            <span class=\"body\" data-attr=\"uni\">${edu.alma}</span>\n          </div>\n        </div>\n      `;\n    })\n    eduDom.unshift('<div class=\"body\">');\n    eduDom.push(\"</div>\");\n\n    const container = new DOMParser().parseFromString(DOMPurify.sanitize(eduDom.join(\" \")), \"text/html\");\n    const fragments = new DocumentFragment();\n    while (container.body.firstChild) {\n      fragments.append(container.body.firstChild);\n    }\n    this.shadowRoot.querySelector(\".container\").append(fragments);\n  }\n\n  setupEventListener() {\n    this.listener = new Listener(this);\n    this.listener.setDelegates(this);\n    this.unsubscribe = eventManager.subscribe(\"fillResumeComponent\", this.listener);\n  }\n\n setupGenericEventListener() {\n    this.shadowRoot.addEventListener(\"transitionend\", this.listener);\n    // resizeObserver.observe(this);\n  } \n\n  abortGenericEventListener() {\n    this.shadowRoot.removeEventListener(\"transitionend\", this.listener); \n    // resizeObserver.unobserve(this);\n    // stopStabilizationCheck(this);\n  }\n\n  async styling() {\n    const sheet = new CSSStyleSheet();\n    // sheet.replaceSync(styles);\n    // sheet.replaceSync(styles.toString());\n    // styles.use({ target: this.shadowRoot });\n    // const style = await import(`./educations-${this.styleType}.shadow.scss`);\n    sheet.replaceSync(styles.toString());\n    this.shadowRoot.adoptedStyleSheets = [sheet];\n  }\n\n  async handleFillResumeComponent(event, delegated) {\n    const isDOM = delegated instanceof Listener;\n\n    if (isDOM) {\n      this.appendData(event.detail.data.owner.edu);\n\n      if (Object.keys(event.detail.data.owner.edu).length > 1) {\n        this.customEventData.await = false;\n        this.customEventData.awaitDetail = () => {\n          return 0;\n        }\n        this.customEventData.eventName = \"updateEduStyle\";\n        this.customEventData.details = { data: event.detail.data.owner.edu };\n        this.publishCustomEvent(this.customEventData);\n\n        await new Promise(resolve => requestAnimationFrame(() => resolve())).then(() => {\n          this.resolveFormRequestReady();\n        });\n      }\n    } else {\n      console.log(\"external\");\n    }\n  } \n\n  handleTransitionend(event, delegated) {\n    // console.log(event);\n  }\n\n  async publishCustomEvent(data) {\n    try {\n      if (data.await) {\n        await data.awaitDetail();\n      }\n\n      const eventDetail = {\n        bubbles: true,\n        composed: true,\n        detail: data.details,\n      };\n      \n      eventManager.publish(data.eventName, eventDetail);\n    } catch (err) {\n      console.error(`Failed to publish ${data.eventName}:`, err);\n    }\n  }\n\n  // testRender() {\n  //   const i = icon(faUserGraduate, {\n  //     classes: [\"fa-user-graduate\"],\n  //   });\n  //\n  //   const dom = `\n  //     <div class=\"container\">\n  //       <h3 class=\"header\">\n  //         ${i.node[0].outerHTML}\n  //         <span class=\"title\">Education</span>\n  //       </h3>\n  //       <div class=\"body\">\n  //         <div class=\"card field\">\n  //           <span class=\"body\">${yaml.owner.edu.field}</span>\n  //         </div>\n  //         <div class=\"card uni\">\n  //           <span class=\"body\">${yaml.owner.edu.uni}</span>\n  //         </div>\n  //       <div>\n  //     </div>\n  //   `;\n  //\n  //   this.shadowRoot.innerHTML = DOMPurify.sanitize(dom);\n  // }  \n}\n\nregisterCustomElement(\"user-educations\", UserEducations);\n"],"names":["UserEducations","HTMLElement","constructor","super","this","attachShadow","mode","isReadyPromise","Promise","resolve","resolveReady","formRequestPromise","resolveFormRequestReady","listener","unsubscribe","styleType","dataset","style","customEventData","await","awaitDetail","eventName","details","_lastObservedSize","_sameSizeFrameCount","_animationFrameId","_pendingSize","handleFillResumeComponent","bind","handleTransitionend","add","connectedCallback","setupEventListener","render","then","styling","disconnectedCallback","abortGenericEventListener","dom","classes","node","outerHTML","shadowRoot","innerHTML","sanitize","images","querySelectorAll","imagePromises","Array","from","map","img","complete","onload","onerror","all","requestAnimationFrame","appendData","data","eduDom","Object","values","edu","field","alma","unshift","push","container","DOMParser","parseFromString","join","fragments","DocumentFragment","body","firstChild","append","querySelector","setDelegates","subscribe","setupGenericEventListener","addEventListener","removeEventListener","sheet","CSSStyleSheet","replaceSync","toString","adoptedStyleSheets","event","delegated","detail","owner","keys","length","publishCustomEvent","console","log","eventDetail","bubbles","composed","publish","err","error"],"sourceRoot":""}