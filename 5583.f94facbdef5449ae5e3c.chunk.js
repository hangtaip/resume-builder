(self.webpackChunkresume_builder=self.webpackChunkresume_builder||[]).push([[1472,5583],{767:t=>{t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960" fill="#1f1f1f"><path d="m395-285 339-339-50-51-289 288-119-118-50 50 169 170Zm1 102L124-455l152-152 119 118 289-288 153 153-441 441Z"></path></svg>'},1472:(t,e,s)=>{"use strict";s.r(e),s.d(e,{default:()=>a});const a='*,*::before,*::after{box-sizing:border-box;scrollbar-width:thin}button{background:#fff;color:hsl(0,0%,-4999999.999999999%);border-radius:.25rem;padding:.5rem;padding-inline:.5rem;border-width:0;transition:color .3s ease-out}button:hover{cursor:pointer;background:#d3d3d3;color:hsl(0,0%,-3274509.803921567%);border-radius:0;transition:.3s ease-in}input:not([type=text]){cursor:pointer}.icon{height:.7rem;width:.7rem}button:has(.icon){display:flex;border-width:0;border-radius:.5rem;padding:0}legend{font-size:2ch;font-weight:bold}.hidden{display:none}.container{height:100%;width:fit-content;background-color:rgba(0,0,0,0);font-family:"Georgia","serif";font-size:1.6ch;word-spacing:.8ch;min-height:100vh;max-height:100vh;position:sticky;top:0;margin-top:-4rem;visibility:hidden;height:0;width:0;transition:visibility .1s ease-in}.container.sidebar-visible{visibility:visible;z-index:200;position:fixed;left:0;margin-top:0;width:auto}.container.sidebar-visible .template-list-item{height:initial}.container.sidebar-visible button{width:100%}.container.sidebar-visible button.close-btn{display:inline-flex}.container aside{anchor-name:--asideAnchor;position:relative;display:flex;flex-flow:column wrap;gap:.5rem;top:0;height:100%;width:fit-content;background-color:#d3d3d3;padding:4rem .5rem .5rem .5rem}.container aside-top{height:4rem;width:100%;width:-webkit-fill-available;position:absolute;top:0;right:0;display:flex;align-items:center;padding:.5rem}.container aside-top .aside_app_title{font-size:2.25ch;font-weight:bold}.container aside-top .close-btn{display:none;margin-left:auto}.container btn-group{display:flex;flex-flow:row wrap;gap:.5rem}.container button{display:flex;justify-content:center;align-items:center;transition-property:color}.container button .hoverShow{opacity:0}.container button.selected .aside-item-icon{color:green}.container button.upload-btn,.container button.export-btn{background:unset}.container button.upload-btn:active,.container button.export-btn:active{transform:scale(0.9);filter:drop-shadow(4px 4px 4px hsl(270, 50%, 40%));transition:all .1s ease-in}.container button.close-btn{height:10px;width:auto;background:unset;align-items:center;border:none;padding:0;margin-top:5px}.container button.template-item{gap:.5rem;justify-content:flex-start}.container button.template-item:not(:last-child){margin-bottom:.25rem}.container button:hover:not(.selected) .hoverShow{opacity:1}.container button:hover:not(.selected) .hoverHide{opacity:0}.container button:hover.selected:not(.template-item-btn){cursor:default;border-radius:.25rem;background-color:#fff}.container .aside-item-icon{position:absolute;transition:color .3s ease-out,opacity .3s ease-out}.container .options-group{display:flex;flex-flow:column;gap:.5rem;padding:.5rem;transition:all .3s ease-in}.container .template-item-icon{position:absolute;display:flex}.container .template-list{width:100%;display:flex;flex-flow:row wrap;gap:.5rem}.container .template-list .template-list-text{flex:1 100%}.container .template-list .template-list-item{overflow:auto;scrollbar-width:none;scroll-behavior:smooth;max-height:20vh;display:grid;grid-auto-flow:row;grid-template-columns:repeat(2, 1fr);gap:.5rem;flex:1 auto}.container .template-list .template-list-item button{border:.15rem solid #fff;border-radius:.25rem;flex:1 auto;padding:.25rem;padding-inline:0;transition:all .1s ease-in}.container .template-list .template-list-item button:active{border-radius:.25rem;border:.15rem solid hsl(120,80%,50%)}.container .template-list .template-list-item button.selected{border:.15rem solid hsl(217,80%,50%)}.container .template-list .template-list-item .template-list-button{display:flex;flex:1 auto;anchor-name:var(--tooltip-anchor-name)}.container .template-list .template-list-buttons{anchor-name:--tlbAnchor}.container [popover=hint]{inset:unset;line-height:0;top:calc(anchor(var(--tooltip-anchor-name) bottom) + 10px);left:calc(anchor(--asideAnchor left) + 1rem);margin:0;padding:0;border-radius:6px;color:#f5f5f5;box-shadow:1px 1px 3px #999;height:auto;width:calc(anchor-size(--asideAnchor width) - 2rem)}.container [popover=hint] .tooltip-group{display:flex;justify-content:center;align-items:center}.container [popover=hint] loading-block{position:absolute;visibility:hidden}.container [popover=hint] loading-block.visible{visibility:visible}.container [popover=hint] img{min-height:100px;width:100%}.container button .btn-inner::before,.container button:not(.close-btn,.template-item-btn)::before{content:"";width:1rem;height:1rem;overflow:hidden;visibility:hidden}.container .btn-inner{display:flex}.container .aside-item-text{display:inline-block;position:relative}.container .aside-item-text>.textbox{position:absolute;right:0}.container .template-list-item{height:0}.container .aside-item-text::before{content:attr(data-text);font-weight:bold;height:0;overflow:hidden;visibility:hidden}.container .transparent,.container .transparent *{visibility:hidden;height:0;opacity:0;padding:0;margin:0}.container svg{height:1rem;width:1rem;vertical-align:middle}.container .icon:not(.fa-xMark){height:.7rem;width:.7rem;vertical-align:middle}@media screen and (min-width: 800px){.container{visibility:visible;opacity:1;width:auto}.container .template-list-item{height:initial}.container aside-top{justify-content:center}}'},3340:(t,e,s)=>{"use strict";s.d(e,{A:()=>a});const a=new class{constructor(){this.registry=new Map}set(t,e){this.registry.set(t,e)}get(t){return this.registry.get(t)}clear(){this.registry.forEach((t,e)=>this.registry.delete(e))}}},4432:t=>{t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960" fill="currentColor"><path d="M666-163 475-354q-20 8-43.5 12.5T384-337q-99 0-169.5-70T144-576q0-37.78 9.5-71.89T182-711l144 144 70-70-144-144q29-17 62.5-26t69.5-9q100 0 170 71t70 170.19q0 22.81-4.5 42.31Q615-513 607-493l195 194q14 14.35 14 34.67Q816-244 802-230l-68 67q-14.09 14-34.04 14Q680-149 666-163Zm34-68 35-34-215-213q20-24 26-52.5t6-44.5q0-66.85-47.5-116.42Q457-741 390-744l82 81q11 11.18 11 26.09t-11.29 26.12L351.29-491.21Q340-480 325.82-480T301-491l-85-85q0 69 49.5 118T384-409q17 0 47-7t56-28l213 213ZM476-488Z"></path></svg>'},5583:(t,e,s)=>{"use strict";s.r(e),s.d(e,{default:()=>y});var a=s(8404),o=s(2616),i=s(6854),n=(s(5052),s(1472)),l=s(5910),r=s(2980),c=s(767),d=s.n(c),h=s(8646),m=s.n(h),u=s(4432),p=s.n(u),b=s(1372),g=s(4727);const v=JSON.parse('{"title":"details","owner":{"name":null,"title":null,"email":null,"github":null,"yob":null,"tel":null,"country_code":null,"location":null,"seek":null,"motto":null,"edu":{"1":{"field":null,"alma":null}},"skills":{"1":{"name":null,"color":null}},"exp":{"1":{"org":null,"pos":null,"tl_from":null,"tl_to":null,"desc":null}}}}');var f=s(9939),w=s(3340);class y extends HTMLElement{static observedAttributes=["data-container-class-add","data-container-class-remove"];constructor(){super(),this.attachShadow({mode:"open"}),this.dataset.state,this.state=new Map,this.listener,this.imgBlob,this.parser=new f.A,this.customEventData={await:!1,awaitDetail:()=>0,eventName:"handleCustomEvent",details:""},this.formValues=new Map,this.componentMap={"home-form":()=>s.e(6346).then(s.bind(s,6346)),"template-default":()=>s.e(1883).then(s.bind(s,4264)),"template-classic":()=>s.e(6626).then(s.bind(s,6626))},this.dataContainerClass=JSON.parse(this.dataset.containerClass||"{}"),l.Yv.add([r.OFY,r.XYS,r.Jyw])}attributeChangedCallback(t,e,s){switch(t){case"data-container-class-add":this.processContainerClass("+",s);break;case"data-container-class-remove":this.processContainerClass("-",s)}}connectedCallback(){this.render(),this.styling(),this.setupEventListener(),this.stateManagement()}disconnectedCallback(){this.unsubscribe()}render(){const t=(0,l.Kk)(r.Jyw,{classes:["fa-xMark","icon"]}),e=`\n         <div class="container transitionable${this.dataContainerClass.length>0?` ${this.dataContainerClass.reduce((t,e)=>`${t} ${e}`)}`:""}"\n         >\n            <aside class="asideBase">\n                <aside-top>\n                  <div class="aside_app_title">\n                    Resume Builder\n                  </div>\n                  <button class="clickable close-btn" title="close" type="button">${t.node[0].outerHTML}\n                  </button>\n                </aside-top>\n                <btn-group>\n                  <button class="clickable template-btn" title="template" type="button" data-target="template">\n                     <div class="btn-inner">\n                       <div class="aside-item-icon hoverShow">${d()}</div>\n                       <div class="aside-item-icon hoverHide">${m()}</div>\n                       <div class="aside-item-text" data-text="Template">\n                         <span class="textbox">Template</span>\n                       </div>\n                     </div>\n                  </button>\n                  <button class="clickable custom-btn" title="custom" type="button" data-target="custom">\n                     <div class="btn-inner">\n                       <div class="aside-item-icon hoverShow">${d()}</div>\n                       <div class="aside-item-icon hoverHide">${p()}</div>\n                       <div class="aside_item_text" data-text="Custom">\n                         <span class="textbox">Custom</span>\n                       </div>\n                     </div>\n                  </button>\n                </btn-group>\n                <options>\n                  ${this.setTemplateOptions()}\n                  ${this.setCustomOptions()}\n                </options> \n            </aside>\n         </div>\n         `;this.shadowRoot.innerHTML=a.A.sanitize(e)}styling(){const t=new CSSStyleSheet;t.replaceSync(n.default.toString()),this.shadowRoot.adoptedStyleSheets=[t]}async stateManagement(){w.A.set("custom-aside",this.state)}setupEventListener(){this.listener=new o.A(this),this.listener.setDelegates(this),this.shadowRoot.addEventListener("click",this.listener),this.shadowRoot.addEventListener("change",this.listener),this.shadowRoot.addEventListener("pointerover",this.listener),this.shadowRoot.addEventListener("pointerout",this.listener),this.shadowRoot.querySelector(".template-list-buttons").addEventListener("scroll",this.listener),this.shadowRoot.addEventListener("transitionstart",this.listener),this.subscribe=g.A.subscribe(["valueRequest","resumeRendered"],this.listener)}async handleClick(t,e){let s;if(e instanceof o.A){let e=t.target.closest(".clickable");if(!e)return;if(!this.shadowRoot.contains(e))return;switch(!0){case e.classList.contains("template-btn"):if(e.classList.contains("selected"))return;this.shadowRoot.querySelectorAll("btn-group button").forEach(t=>{t.classList.remove("selected"),this.shadowRoot.querySelector(`.${t.dataset.target}-options`).classList.toggle("transparent")}),Array.from(this.shadowRoot.querySelectorAll(`.options-group:not(.${e.dataset.target}-options)`)).map(t=>t.classList.add("transparent")),e.classList.add("selected"),this.customEventData.await=!0,this.customEventData.awaitDetail=()=>this.componentMap["home-form"](),this.customEventData.eventName="homeFormLoaded",this.customEventData.details={elementName:"home-form"},this.publishCustomEvent(this.customEventData),this.state.set("btn-group","template-btn"),this.stateManagement();break;case e.classList.contains("custom-btn"):if(e.classList.contains("selected"))return;this.shadowRoot.querySelectorAll("btn-group button").forEach(t=>{t.classList.remove("selected"),this.shadowRoot.querySelector(`.${t.dataset.target}-options`).classList.toggle("transparent")}),Array.from(this.shadowRoot.querySelectorAll(`.options-group:not(.${e.dataset.target}-options)`)).map(t=>t.classList.add("transparent")),e.classList.add("selected"),this.state.set("btn-group","custom-btn"),this.stateManagement();break;case e.classList.contains("upload-btn"):this.shadowRoot.querySelector(".upload-file").click();break;case e.classList.contains("export-btn"):s=structuredClone(this.collectForm()),s.owner.image=this.imgBlob;const t=b.Ay.dump(s),a=new Blob([t],{type:"text/yaml"}),o=URL.createObjectURL(a),i=document.createElement("a");i.href=o,i.download="data.yaml",i.click(),URL.revokeObjectURL(o);break;case e.classList.contains("close-btn"):const n=this.dataset.containerClassAdd;this.dataset.containerClassRemove=n,this.customEventData.await=!1,this.customEventData.awaitDetail=()=>0,this.customEventData.eventName="toggleNavbar",this.customEventData.details={className:"navbar_sidebar_show"},this.publishCustomEvent(this.customEventData);break;case e.classList.contains("template-item-btn"):s=this.collectForm(),e.closest(".template-list-buttons").querySelectorAll(".template-list-button button").forEach(t=>{t.classList.remove("selected")}),e.classList.add("selected"),this.shadowRoot.querySelector(".tooltip").hidePopover();let l=new Map;l.set("formCnt",4),l.set("readyCnt",0),w.A.set("formLoaded",l),this.customEventData.await=!1,this.customEventData.awaitDetail=()=>0,this.customEventData.eventName="startLoading",this.customEventData.details={},this.publishCustomEvent(this.customEventData),this.customEventData.await=!1,this.customEventData.awaitDetail=()=>0,this.customEventData.eventName="appendResume",this.customEventData.details={resumeStyle:e.dataset.attr},this.publishCustomEvent(this.customEventData),this.customEventData.await=!1,this.customEventData.awaitDetail=()=>0,this.customEventData.eventName="completeFormRequest",this.customEventData.details={data:s},this.publishCustomEvent(this.customEventData),this.state.set("template-list-buttons",`${e.dataset.attr}-btn`),this.stateManagement()}}else console.log("external")}handleChange(t,e){if(e instanceof o.A){let e=t.target.closest(".changeable");if(!e)return;if(!this.shadowRoot.contains(e))return;if(!0===e.classList.contains("upload-file")){let t,s=new Map;s.set("formCnt",4),s.set("readyCnt",0),w.A.set("formLoaded",s),this.customEventData.await=!1,this.customEventData.awaitDetail=()=>0,this.customEventData.eventName="startLoading",this.customEventData.details={},this.publishCustomEvent(this.customEventData),e.files&&e.files[0]&&(t=new FileReader,t.onload=t=>{const e=b.Ay.load(t.target.result);this.customEventData.await=!1,this.customEventData.awaitDetail=()=>0,this.customEventData.eventName="importDataLoaded",this.customEventData.details={data:e},this.publishCustomEvent(this.customEventData)},t.readAsText(e.files[0]),e.value=null)}}else console.log("external")}handleValueRequest(t,e){let s,a;e instanceof o.A?Object.keys(t.detail).forEach(e=>{"form-personal"==e?t.detail[e].forEach(t=>{s=t.shadowRoot.querySelector("input"),this.formValues.set(s.dataset.attr,t)}):"form-education"==e?null==this.formValues.get("edu")?.length||t.detail[e].length>this.formValues.get("edu")?.length?t.detail[e].forEach(t=>{a=this.formValues.get("edu")||[],a.some(e=>e===t)||this.formValues.set("edu",[...a,t])}):this.formValues.get("edu")?.length>t.detail[e].length&&(this.formValues.set("edu",[]),t.detail[e].forEach(t=>{this.formValues.set("edu",[...this.formValues.get("edu"),t])})):"form-skills"==e?null==this.formValues.get("skills")?.length||t.detail[e].length>this.formValues.get("skills")?.length?t.detail[e].forEach(t=>{a=this.formValues.get("skills")||[],a.some(e=>e===t)||this.formValues.set("skills",[...a,t])}):this.formValues.get("skills")?.length>t.detail[e].length&&(this.formValues.set("skills",[]),t.detail[e].forEach(t=>{this.formValues.set("skills",[...this.formValues.get("skills"),t])})):"form-experience"==e&&(null==this.formValues.get("exp")?.length||t.detail[e].length>this.formValues.get("exp")?.length?t.detail[e].forEach(t=>{a=this.formValues.get("exp")||[],a.some(e=>e===t)||this.formValues.set("exp",[...a,t])}):this.formValues.get("exp")?.length>t.detail[e].length&&(this.formValues.set("exp",[]),t.detail[e].forEach(t=>{this.formValues.set("exp",[...this.formValues.get("exp"),t])})))}):console.log("external")}handleResumeRendered(t,e){e instanceof o.A?(this.customEventData.await=!1,this.customEventData.awaitDetail=()=>0,this.customEventData.eventName="showPreview",this.customEventData.details={},this.publishCustomEvent(this.customEventData)):console.log("external")}handlePointerover(t,e){if(e instanceof o.A){const e=t.target.closest(".hoverable");if(!e)return;if(!this.shadowRoot.contains(e))return;const s=this.shadowRoot.querySelector(".tooltip");s.querySelector("loading-block").classList.add("visible"),s.style.setProperty("--tooltip-anchor-name",e.closest(".template-list-button").style.getPropertyValue("--tooltip-anchor-name")),s.showPopover({source:e}),console.log("here"),s.querySelector("img").src=e.dataset.src,s.querySelector("img").onload=t=>{s.querySelector("loading-block").classList.remove("visible")},s.querySelector("img").onerror=t=>{s.querySelector("loading-block").classList.remove("visible"),s.querySelector("img").src="../../assets/imgs/img_not_available.svg",s.querySelector("img").alt="No image found"}}else console.log("external")}handlePointerout(t,e){if(e instanceof o.A){const e=t.target.closest(".hoverable");if(!e)return;if(!this.shadowRoot.contains(e))return;this.shadowRoot.querySelector(".tooltip").hidePopover()}else console.log("external")}handleScroll(t,e){if(e instanceof o.A){const e=t.target.closest(".scrollable");if(!e)return;if(!this.shadowRoot.contains(e))return;const s=this.shadowRoot.querySelector(".tooltip");s.matches(":popover-open")&&s.hidePopover()}else console.log("external")}handleTransitionstart(t,e){if(e instanceof o.A){const e=t.target.closest(".transitionable");if(!e)return;if(!this.shadowRoot.contains(e))return;if(t.target!=e)return;this.shadowRoot.querySelectorAll("btn-group button").forEach(t=>{t.classList.remove("selected")}),w.A.get("custom-aside").forEach((t,e)=>{switch(e){case"btn-group":Array.from(this.shadowRoot.querySelectorAll(`.options-group:not(.${this.shadowRoot.querySelector(`${e} .${t}`).dataset.target}-options)`)).map(t=>t.classList.add("transparent")),this.shadowRoot.querySelector(`${e} .${t}`).classList.add("selected"),this.shadowRoot.querySelector(`.${this.shadowRoot.querySelector(`${e} .${t}`).dataset.target}-options`).classList.remove("transparent");break;case"template-list-buttons":this.shadowRoot.querySelector(`.${e} .${t}`).closest(".template-list-buttons").querySelectorAll(".template-list-button button").forEach(t=>{t.classList.remove("selected")}),this.shadowRoot.querySelector(`.${e} .${t}`).classList.add("selected")}})}else console.log("external")}setTemplateOptions(){const t=(0,l.Kk)(r.OFY,{classes:["fa-arrow-up","icon"]}),e=(0,l.Kk)(r.XYS,{classes:["fa-arrow-down","icon"]});return`\n      <div class="options-group template-options transparent">\n        <div class="template-options_item">\n          <button class="template-item clickable upload-btn" title="Upload" type="button">\n            <div class="template-item-icon">${t.node[0].outerHTML}</div>\n            <div class="template-item-text">Upload file</div>\n            <input type="file" accept=".yaml,.yml" title="Upload file" class="hidden changeable upload-file"></input>\n          </button>\n          <button class="template-item clickable export-btn" title="Export" type="button">\n            <div class="template-item-icon">${e.node[0].outerHTML}</div>\n            <div class="template-item-text">Export file</div>\n          </button>\n        </div>\n        <div class="template-options-item">\n          ${this.setTemplateList()}\n        </div>\n      </div>\n    `}setTemplateList(){return`\n      <div class="template-list">\n        <div class="template-list-text">Style</div>\n          <div class="template-list-item template-list-buttons scrollable">\n            ${[{name:"classic",img:"../../pages/home/resume_classic/sample.png"},{name:"default",img:"../../assets/imgs/templates/resume_default/sample.png"}].map((t,e)=>`\n                <div class="template-list-button" style="--tooltip-anchor-name: --anchor-${t.name}-${e}">\n                  <button class="clickable hoverable template-item-btn ${t.name}-btn" type="button" title="${t.name}" popovertarget="mypopover" data-attr="${t.name}" data-src="${t.img}">${t.name}\n                  </button> \n                </div>\n              `).join("")}\n          </div>\n        <tooltip class="tooltip" popover="hint">\n          <div class="tooltip-group">\n            <loading-block></loading-block>\n            <img alt="Template Image" src="" loading="lazy">\n          </div>\n        </tooltip>\n      </div>\n    `}setCustomOptions(){return'\n      <div class="options-group custom-options transparent">\n        <div>I am custom options</div>\n      </div>\n    '}async publishCustomEvent(t){try{t.await&&await t.awaitDetail();const e={bubbles:!0,composed:!0,detail:t.details};g.A.publish(t.eventName,e)}catch(e){console.error(`Failed to publish ${t.eventName} : ${e}`)}}processContainerClass(t,e){const s=JSON.parse(e).sort(),a=this.shadowRoot.querySelector(".container");"+"==t?s.forEach(t=>a.classList.add(t)):"-"==t&&s.forEach(t=>a.classList.remove(t))}collectForm(){const t=structuredClone(v);let e,s;return this.formValues.forEach((a,o)=>{switch(o){case"edu":case"skills":e={},a.map((t,s)=>{e[s+1]={},Array.from(t.shadowRoot.querySelectorAll("input")).forEach(t=>{e[s+1][t.dataset.attr]=t.value})}),t.owner[o]=e;break;case"exp":let i;e={},a.map((t,a)=>{e[a+1]={},Array.from(t.querySelectorAll(".form-group-item")).forEach(t=>{t.querySelector("input")?(s=t.querySelector("input"),e[a+1][s.dataset.attr]=s.value):t.querySelector("custom-textarea")&&(s=t.querySelector("custom-textarea"),i=s.shadowRoot.querySelector("textarea"),e[a+1][i.dataset.attr]=[],i.value.split(/[\r\n\t]+/g).forEach((t,s)=>{e[a+1][i.dataset.attr][s]=t.slice(2).trim()}))})}),t.owner[o]=e;break;default:t.owner[o]=a.getInputValue(),"image"==o&&(t.owner[o]=new Blob([JSON.stringify({data:a.querySelector("img").src},null,2)],{type:"application/json"}),this.imgBlob=a.querySelector("img").src)}}),t}}(0,i.Dp)("custom-aside",y)},8646:t=>{t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960" fill="currentColor"><path d="M144-456v-288.27Q144-774 165.5-795q21.5-21 50.5-21h228v360H144Zm228-72Zm144-288h228q29.7 0 50.85 21.15Q816-773.7 816-744v168H516v-240Zm0 672v-360h300v288q0 29-21.15 50.5T744-144H516ZM144-384h300v240H216q-29 0-50.5-21.5T144-216v-168Zm228 72Zm216-336Zm0 216Zm-372-96h156v-216H216v216Zm372-120h156v-96H588v96Zm0 216v216h156v-216H588ZM216-312v96h156v-96H216Z"></path></svg>'},9939:(t,e,s)=>{"use strict";s.d(e,{A:()=>a});class a{constructor(){this.fragment=document.createDocumentFragment(),this.nodeMap=new Map,this.template,this.sheet=new CSSStyleSheet,this.css=[],this.mediaCss={},this.foundNode}cloneNode(t){return this.template=document.createElement("template"),this.walkNode(t),this.arrangeNode(t),this.applySheet(),this.template.content}walkNode(t,e=0){t.shadowRoot?(t.shadowRoot.adoptedStyleSheets.forEach(e=>{const s=[...e.cssRules].map(e=>this.prependToSelectors(e.cssText,t.tagName.toLowerCase())).join("\n");this.css.push(s)}),t.shadowRoot.childNodes.forEach(s=>{if(!t.dataset?.printDisable&&!s.dataset?.printDisable&&1==s.nodeType)if("style"==s.tagName.toLowerCase()){const s=t.shadowRoot.styleSheets;this.nodeMap.set(`${t.tagName.toLowerCase()}-style`,s),this.addSheet(t.tagName.toLowerCase(),s,e)}else this.nodeMap.get(t.tagName.toLowerCase())||this.nodeMap.set(t.tagName.toLowerCase(),s)}),this.walkNode(t.shadowRoot,e+1)):t.childNodes.length&&t.childNodes.forEach(t=>{this.walkNode(t,e+1)})}arrangeNode(t){t.shadowRoot?(t.shadowRoot.childNodes.forEach(e=>{if(!t.dataset?.printDisable&&!e.dataset?.printDisable&&1==e.nodeType)if("style"!=e.tagName.toLowerCase()){const e=t.tagName.toLowerCase(),s=this.nodeMap.get(e),a=(new DOMParser).parseFromString(t.outerHTML,"text/html").body.firstChild;this.template.content.querySelector(e)?(this.template.content.querySelector(e).replaceWith(a.cloneNode(!0)),this.template.content.querySelector(e).append(s.cloneNode(!0))):(this.template.content.append(a.cloneNode(!0)),this.template.content.querySelector(e).append(s.cloneNode(!0)))}else this.nodeMap.get(t.tagName.toLowerCase())}),this.arrangeNode(t.shadowRoot)):t.childNodes.length&&t.childNodes.forEach(t=>{this.arrangeNode(t)})}searchNode(t,e,s){return t.shadowRoot?(t.shadowRoot.childNodes.forEach(t=>{if(1==t.nodeType&&"style"!=t.tagName.toLowerCase())switch(e){case"attr":t.hasAttribute(s)&&(this.foundNode=t);break;case"class":t.classList.contains(s)&&(this.foundNode=t);break;case"dataset":t.dataset[s]&&(this.foundNode=t);break;case"id":t.id==s&&(this.foundNode=t);break;case"tagName":t.tagName.toLowerCase()==s.toLowerCase()&&(this.foundNode=t)}}),this.searchNode(t.shadowRoot,e,s)):t.childNodes.length&&t.childNodes.forEach(t=>{if(1==t.nodeType){switch(e){case"attr":t.hasAttribute(s)&&(this.foundNode=t);break;case"class":t.classList.contains(s)&&(this.foundNode=t);break;case"dataset":t.dataset[s]&&(this.foundNode=t);break;case"id":t.id==s&&(this.foundNode=t);break;case"tagName":t.tagName.toLowerCase()==s.toLowerCase()&&(this.foundNode=t)}this.searchNode(t,e,s)}}),this.foundNode}addSheet(t,e,s){const a=`${t}-${s}-${crypto.randomUUID().substring(0,8)}`,o=[...e].map(t=>[...t.cssRules].map(t=>`.${a} ${t.cssText}`)).filter(Boolean).join("\n");this.css.push(o)}async applySheet(){const t=`${this.css.join("\n")}\n${Object.keys(this.mediaCss).map(t=>`${t} { ${this.mediaCss[t]} }`).join("\n")}`;await this.sheet.replace(t),this.template.content.adoptedStyleSheets=[this.sheet]}prependToSelectors(t,e){const s=t.trim();if(s.startsWith("@media")){const t=/(@media[^{]+)\s*\{([\s\S]*?)\s*\}/,a=s.match(t);if(!a)return"";const[,o,i]=a,[n,l]=i.trim().split(/\s*{\s*/),r=`${n.split(/\s*,\s*/).map(t=>{const s=t.trim();return s.startsWith(".container")?`${e} > ${s}`:`${e} ${s}`}).join(", ")} { ${l} }`;return this.mediaCss[o]=(this.mediaCss[o]||"")+` ${r}`,""}const[a,o]=t.split(/\s*{\s*/);return`${a.split(/\s*,\s*/).map(t=>t.trim().startsWith(".container")?`${e} > ${t}`:`${e} ${t}`).join(", ")} { ${o}`}}}}]);
//# sourceMappingURL=5583.f94facbdef5449ae5e3c.chunk.js.map