{"version":3,"file":"8008.9fe6e6855d1a9f50f39d.chunk.js","mappings":"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","sources":["webpack://resume-builder/./src/js/dataURL.js","webpack://resume-builder/./src/js/objectRegistry.js","webpack://resume-builder/./src/pages/home/resume_default/skills/skills.js"],"sourcesContent":["export async function toDataURL(url) {\n  return await fetch(url)\n    .then((response) => response.blob())\n    .then((blob) =>\n      new Promise((resolve, reject) => {\n        const reader = new FileReader();\n        reader.onloadend = () => resolve(reader.result);\n        reader.onerror = reject;\n        reader.readAsDataURL(blob);\n      })\n    );\n}\n","class ObjectRegistry {\n  constructor() {\n    this.registry = new Map();\n  }\n\n  set(key, value) {\n    this.registry.set(key, value);\n  }\n\n  get(key) {\n    return this.registry.get(key);\n  }\n\n  clear() {\n    this.registry.forEach((_, key) => this.registry.delete(key));\n  }\n}\n\nexport default new ObjectRegistry();\n","import DOMPurify from \"dompurify\";\nimport Listener from \"../../../../js/listener.js\";\n// import yaml from \"../../data/data.yaml\";\nimport { registerCustomElement } from \"../../../../js/registerComponent.js\";\nimport { toDataURL } from \"../../../../js/dataURL.js\";\nimport styles from \"./skills.shadow.scss\";\nimport { icon, library } from \"@fortawesome/fontawesome-svg-core\";\nimport { faCode } from \"@fortawesome/free-solid-svg-icons\";\nimport eventManager from \"../../../../js/eventManager.js\";\nimport { isNullUndefinedOrEmpty } from \"../../../../js/helper.js\";\nimport objectRegistry from \"../../../../js/objectRegistry.js\";\n\nexport default class UserSkills extends HTMLElement {\n  constructor() {\n    super();\n    this.attachShadow({ mode: \"open\" });\n    this.isReadyPromise = new Promise(resolve => {\n      this.resolveReady = resolve;\n    });\n    this.formRequestPromise = new Promise(resolve => {\n      this.resolveFormRequestReady = resolve;\n    });\n    this.listener;\n    this.customEventData = {\n      await: false,\n      awaitDetail() {\n        return 0;\n      },\n      eventName: \"handleCustomEvent\",\n      details: \"\",\n    };\n    this.styleType = this.dataset.style || \"default\";\n    this.handleFillResumeComponent = this.handleFillResumeComponent.bind(this);\n    this.unsubscribe;\n    library.add(faCode);\n  }\n\n  async connectedCallback() {\n    this.setupEventListener();\n    // await this.testRender();\n    this.render().then(() => {\n      this.resolveReady();\n    });\n    this.styling();\n  }\n\n  disconnectedCallback() {\n    this.unsubscribe();\n  }\n\n  // TODO:\n  // - logoColor to handle more languages\n  // - labelName to handle more languages\n  // - have a list to match them\n  async render() { \n    const i = icon(faCode, {\n      classes: [\"fa-code\"],\n    });\n\n    const dom = `\n      <div class=\"container\">\n        <h3 class=\"header\">\n          ${i.node[0].outerHTML}\n          <span class=\"title\">Skills</span>\n        </h3>\n      </div>\n    `;\n\n    this.shadowRoot.innerHTML = DOMPurify.sanitize(dom);\n\n    const images = this.shadowRoot.querySelectorAll(\"img\");\n    const imagePromises = Array.from(images).map(img => {\n      if (img.complete) return Promise.resolve();\n      return new Promise(resolve => { \n        img.onload = resolve; \n        img.onerror = resolve; \n      });\n    });\n\n    await Promise.all(imagePromises);\n    await new Promise(resolve => requestAnimationFrame(() => resolve()));\n  }\n\n  async appendData(data) {\n    const skills = data;\n    const logoColor = (obj) =>\n      obj.name.toLowerCase() == \"javascript\" ? \"black\" : \"white\";\n    const labelName = (obj) =>\n      obj.name.toLowerCase() == \"csharp\" ? \"C%23\" : obj.name;\n    const skillImg = async (obj) => {\n      if (isNullUndefinedOrEmpty(obj.name)) { return }\n\n      if (Object.hasOwn(obj, \"icon\")) {\n        const badgeUrl = await toDataURL(obj.icon).then((dataURL) => {\n          const part = dataURL.split(\",\");\n          const mimeType = part[0].split(\":\")[1].split(\";\")[0];\n          const startMime = part[0].split(\"/\").shift();\n          const endMime = part[0].split(\";\").pop();\n          const fileType = mimeType.split(\"/\").pop();\n          const encodedFileType = encodeURIComponent(fileType);\n          const encodedData = encodeURIComponent(part[1]);\n          const badgeUrl = `https://img.shields.io/badge/${labelName(\n            obj,\n          )}-%23${obj.color}?style=for-the-badge&logo=${startMime}/${encodedFileType};${endMime},${encodedData}&logoColor=${logoColor(\n            obj,\n          )}`;\n\n          return badgeUrl;\n        });\n\n        return new Promise((resolve) => {\n          resolve(`\n            <img alt=\"${obj.name}\" src=\"${badgeUrl}\" class=\"badge\">\n          `);\n        });\n      } else {\n        return new Promise((resolve) => {\n          resolve(`\n            <img alt=\"Static Badge\" src=\"https://img.shields.io/badge/${labelName(\n              obj,\n            )}-%23${obj.color.toString().replace(/^#/, \"\")}?style=for-the-badge&logo=${obj.name}&logoColor=${logoColor(\n              obj,\n            )}\" class=\"badge\">\n          `);\n        });\n      }\n    };\n    const imgPromises = Object.values(skills).map((skill) => skillImg(skill));\n    const skillDom = await Promise.all(imgPromises);\n    this.skillsCount = imgPromises.length;\n    // const skillDom = Object.values(skills).map((skill) => {\n    //   //<img class=\"img\" src=\"${skill.icon}\" alt=\"${skill.name.toLowerCase()}\" />\n    //   {/* <div class=\"card\"> */}\n    //   {/*   <span class=\"body\">${skill.name}</span> */}\n    //   {/* </div> */}\n    //\n    //   return `\n    //     <img alt=\"Static Badge\" src=\"https://img.shields.io/badge/${\n    //     labelName(skill)\n    //   }-%23${skill.color}?style=for-the-badge&logo=${skill.name}&logoColor=${\n    //     logoColor(skill)\n    //   }\">\n    //   `;\n    // });\n\n    skillDom.unshift('<div class=\"body\">');\n    skillDom.push(\"</div>\");\n\n    const container = new DOMParser().parseFromString(DOMPurify.sanitize(skillDom.join(\" \")), \"text/html\");\n    const fragments = new DocumentFragment();\n    while(container.body.firstChild) {\n      fragments.append(container.body.firstChild);\n    }\n\n    this.shadowRoot.querySelector(\".container\").append(fragments); \n  }\n\n  async styling() {\n    const sheet = new CSSStyleSheet();\n    // sheet.replaceSync(styles);\n    // sheet.replaceSync(styles.toString());\n    // styles.use({ target: this.shadowRoot });\n    // const style = await import(`./skills-${this.styleType}.shadow.scss`);\n    sheet.replaceSync(styles.toString());\n    this.shadowRoot.adoptedStyleSheets = [sheet];\n  }\n\n  setupEventListener() {\n    this.listener = new Listener(this);\n    this.listener.setDelegates(this);\n    this.unsubscribe = eventManager.subscribe(\"fillResumeComponent\", this.listener);\n  }\n\n  async handleFillResumeComponent(event, delegated) {\n    const isDOM = delegated instanceof Listener;\n\n    if (isDOM) {\n      // this.render(event.detail.data.owner.skills);\n      this.appendData(event.detail.data.owner.skills);\n\n      await new Promise(resolve => requestAnimationFrame(() => resolve())).then(() => {\n        this.resolveFormRequestReady();\n      });\n    } else {\n      console.log(\"external\");\n    }\n  } \n\n  async publishCustomEvent(data) {\n    try {\n      if (data.await) {\n        await data.awaitDetail();\n      }\n\n      const eventDetail = {\n        bubbles: true,\n        composed: true,\n        detail: data.details,\n      };\n\n      eventManager.publish(data.eventName, eventDetail);\n    } catch (err) {\n      console.error(`Failed to publish ${data.eventName} : ${err}`);\n    }\n  }\n\n  // async testRender() {\n  //   const skills = yaml.owner.skills;\n  //   const logoColor = (obj) =>\n  //     obj.name.toLowerCase() == \"javascript\" ? \"black\" : \"white\";\n  //   const labelName = (obj) =>\n  //     obj.name.toLowerCase() == \"csharp\" ? \"C%23\" : obj.name;\n  //   const skillImg = async (obj) => {\n  //     if (Object.hasOwn(obj, \"icon\")) {\n  //       const badgeUrl = await toDataURL(obj.icon).then((dataURL) => {\n  //         const part = dataURL.split(\",\");\n  //         const mimeType = part[0].split(\":\")[1].split(\";\")[0];\n  //         const startMime = part[0].split(\"/\").shift();\n  //         const endMime = part[0].split(\";\").pop();\n  //         const fileType = mimeType.split(\"/\").pop();\n  //         const encodedFileType = encodeURIComponent(fileType);\n  //         const encodedData = encodeURIComponent(part[1]);\n  //         const badgeUrl = `https://img.shields.io/badge/${labelName(\n  //           obj,\n  //         )}-%23${obj.color}?style=for-the-badge&logo=${startMime}/${encodedFileType};${endMime},${encodedData}&logoColor=${logoColor(\n  //           obj,\n  //         )}`;\n  //\n  //         return badgeUrl;\n  //       });\n  //\n  //       return new Promise((resolve) => {\n  //         resolve(`\n  //           <img alt=\"${obj.name}\" src=\"${badgeUrl}\" class=\"badge\">\n  //         `);\n  //       });\n  //     } else {\n  //       return new Promise((resolve) => {\n  //         resolve(`\n  //           <img alt=\"Static Badge\" src=\"https://img.shields.io/badge/${labelName(\n  //             obj,\n  //           )}-%23${obj.color}?style=for-the-badge&logo=${obj.name}&logoColor=${logoColor(\n  //             obj,\n  //           )}\" class=\"badge\">\n  //         `);\n  //       });\n  //     }\n  //   };\n  //   const imgPromises = Object.values(skills).map((skill) => skillImg(skill));\n  //   const skillDom = await Promise.all(imgPromises);\n  //   // const skillDom = Object.values(skills).map((skill) => {\n  //   //   //<img class=\"img\" src=\"${skill.icon}\" alt=\"${skill.name.toLowerCase()}\" />\n  //   //   {/* <div class=\"card\"> */}\n  //   //   {/*   <span class=\"body\">${skill.name}</span> */}\n  //   //   {/* </div> */}\n  //   //\n  //   //   return `\n  //   //     <img alt=\"Static Badge\" src=\"https://img.shields.io/badge/${\n  //   //     labelName(skill)\n  //   //   }-%23${skill.color}?style=for-the-badge&logo=${skill.name}&logoColor=${\n  //   //     logoColor(skill)\n  //   //   }\">\n  //   //   `;\n  //   // });\n  //\n  //   skillDom.unshift('<div class=\"body\">');\n  //   skillDom.push(\"</div>\");\n  //\n  //   const i = icon(faCode, {\n  //     classes: [\"fa-code\"],\n  //   });\n  //\n  //   const dom = `\n  //     <div class=\"container\">\n  //       <h3 class=\"header\">\n  //         ${i.node[0].outerHTML}\n  //         <span class=\"title\">Skills</span>\n  //       </h3>\n  //       ${skillDom.join(\" \")} \n  //     </div>\n  //   `;\n  //\n  //   this.shadowRoot.innerHTML = DOMPurify.sanitize(dom);\n  // } \n}\n\nregisterCustomElement(\"user-skills\", UserSkills);\n"],"names":["async","toDataURL","url","fetch","then","response","blob","Promise","resolve","reject","reader","FileReader","onloadend","result","onerror","readAsDataURL","constructor","this","registry","Map","set","key","value","get","clear","forEach","_","delete","UserSkills","HTMLElement","super","attachShadow","mode","isReadyPromise","resolveReady","formRequestPromise","resolveFormRequestReady","listener","customEventData","await","awaitDetail","eventName","details","styleType","dataset","style","handleFillResumeComponent","bind","unsubscribe","add","connectedCallback","setupEventListener","render","styling","disconnectedCallback","dom","classes","node","outerHTML","shadowRoot","innerHTML","sanitize","images","querySelectorAll","imagePromises","Array","from","map","img","complete","onload","all","requestAnimationFrame","appendData","data","skills","logoColor","obj","name","toLowerCase","labelName","imgPromises","Object","values","skill","hasOwn","badgeUrl","icon","dataURL","part","split","mimeType","startMime","shift","endMime","pop","fileType","encodedFileType","encodeURIComponent","encodedData","color","toString","replace","skillImg","skillDom","skillsCount","length","unshift","push","container","DOMParser","parseFromString","join","fragments","DocumentFragment","body","firstChild","append","querySelector","sheet","CSSStyleSheet","replaceSync","adoptedStyleSheets","setDelegates","subscribe","event","delegated","detail","owner","console","log","publishCustomEvent","eventDetail","bubbles","composed","publish","err","error"],"sourceRoot":""}